@model BugWeb.Models.ReportingViewModel

@{
    ViewBag.Title = "Charts";
    ViewBag.Reporting = "true";
}
<div flex layout-fill layout="column" ng-controller="MapCtrl">
    <div flex layout="column" layout-fill layout-align="center center">
        <div flex layout="column" layout-fill id="map" layout-align="center center" ng-hide="!someScoutStops"></div>
        <div ng-if="!someScoutStops && !loading">
            <p class="md-body-1">No data available. See Map Settings.</p>
        </div>
        <md-progress-circular md-mode="indeterminate" ng-if="loading" md-diameter="70px"></md-progress-circular>

    </div>
    <md-sidenav layout="column" class="md-sidenav-right md-whiteframe-z2" md-component-id="right" ng-cloak>
        <md-toolbar class="md-primary md-hue-1 md-whiteframe-z1">
            <md-toolbar-tools layout="row" flex layout-align="center center">
                <h2 offset="5" class="md-title">Map Settings</h2>
                <span flex></span>
                <md-button ng-click="defaultSettings()" class="md-icon-button" aria-label="Setting Defaults">
                    <ng-md-icon icon="refresh"></ng-md-icon>
                </md-button>
            </md-toolbar-tools>
        </md-toolbar>
        <md-content layout-padding flex layout="column" class="settingsNavContent md-hue-1">
            <md-input-container class="md-hue-1" ng-repeat="constraint in constraints.misc">
                <label>{{constraint.title}}</label>
                <md-select ng-model="constraint.value" ng-disabled="loading">
                    <md-option ng-repeat="item in constraint.list" value="{{item}}" ng-selected="item === constraint.list[0]">
                        {{item}}
                    </md-option>
                </md-select>
            </md-input-container>
            <div layout="row">
                <div layout="column">
                    <div layout="row">
                        <h5 flex="15">Since</h5>
                        <md-datepicker class="md-hue-1" ng-model="constraints.dates.from" md-max-date="constraints.dates.to" ng-disabled="constraints.dates.all || loading"></md-datepicker>
                    </div>
                    <div layout="row">
                        <h5 flex="15">Until</h5>
                        <md-datepicker class="md-hue-1" ng-model="constraints.dates.to" md-min-date="constraints.dates.from" ng-disabled="constraints.dates.all || loading"></md-datepicker>
                    </div>
                </div>
                <div layout="row" layout-align="end center">
                    <md-checkbox class="md-primary" aria-label="All Dates Checkbox" ng-model="constraints.dates.all" ng-disabled="loading">
                        <h5>All</h5>
                    </md-checkbox>
                </div>
            </div>
            <md-divider></md-divider>
        </md-content>
    </md-sidenav>
</div>


@section scripts
{
    <script type="application/javascript">
        angular.module("appMain").factory("reportingUrlService", function(){
            return {
                recordsUrl: "@Url.Content("~/api/records/" + Model.RecordsUrlSuffix)",
                speciesUrl: "@Url.Content("~/api/species")"
            };
        });
    </script>

    <script src="https://maps.googleapis.com/maps/api/js?signed_in=true&libraries=visualization"></script>

    @Scripts.Render("~/bundles/vendor/xdate")
    @Scripts.Render("~/bundles/reporting/common")
    @Scripts.Render("~/bundles/reporting/map")


}


@*@section styles
{
    @Styles.Render("~/Content/css/chartist")
    @Styles.Render("~/Content/css/typeahead")
    @Styles.Render("~/Content/css/bootstrap-tagsinput")
    @Styles.Render("~/Content/css/reporting")
}


<div id="firstContentRow" class="row">
    <div class="col-sm-4">


        <!--Y-axis options for chart-->
        <label for="view">View</label>
        <select id="view" class="form-control chartControl">
            <optgroup label="Average">
                <option value="Bugs per Tree">Bugs per Tree</option>
                <option value="Number of Bugs">Number of Bugs</option>
                <option value="Number of Trees">Number of Trees</option>
            </optgroup>
            <optgroup label="Total">
                <option value="Number of Bugs">Number of Bugs</option>
                <option value="Number of Trees">Number of Trees</option>
            </optgroup>
        </select><br />


        <!--X-axis options for chart-->
        <label for="against">Against</label>
        <select id="against" class="form-control chartControl">
            <option value="Date">Date</option>
            <option value="Block">Block</option>
            <option value="Species">Species</option>
            <option value="Species Life Stage">Species Life Stage</option>
        </select><br />


        <!--Grouping options to determine chart type and series-->
        <label for="grouping">Group By</label>
        <select id="grouping" class="form-control chartControl">
            <option value="None">None</option>
            <option value="Block">Block</option>
            <option value="Species">Species</option>
            <option value="Species Life Stage">Species Life Stage</option>
        </select><br />


        <!--table of constraints for chart data-->
        <div id="constraintsDiv" class="panel-group">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h1 class="panel-title">
                        <span id="collapseIcon" data-toggle="collapse" data-target="#collapsibleTable" class="glyphicon glyphicon-expand"></span>
                        <span id="resetIcon" class="glyphicon glyphicon-refresh pull-right"></span>
                        <strong> Constraints</strong>
                    </h1>
                </div>
                <div id="collapsibleTable" class="panel-collapse collapse">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Settings</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <th>Date</th>
                                <td>
                                    <label for="constraintDateFrom">From:</label>
                                    <input type="date" id="constraintDateFrom" class="form-control chartControl">
                                    <label for="constraintDateTo">To:</label>
                                    <input type="date" id="constraintDateTo" class="form-control chartControl"><br />
                                    <input id="constraintDateAny" type="checkbox" class="chartControl"> Any
                                </td>
                            </tr>
                            <tr>
                                <th>Farms</th>
                                <td>
                                    <input id="constraintFarms" class="form-control chartControl" type="text" />
                                </td>
                            </tr>
                            <tr>
                                <th>Blocks</th>
                                <td>
                                    <input id="constraintBlocks" class="form-control chartControl" type="text" />
                                </td>
                            </tr>
                            <tr>
                                <th>Species</th>
                                <td>
                                    <input id="constraintSpecies" class="form-control chartControl" type="text" />
                                </td>
                            </tr>
                            <tr>
                                <th>Species Life Stages</th>
                                <td>
                                    <input id="constraintLifeStage" class="form-control chartControl" type="text" />
                                </td>
                            </tr>
                            <tr>
                                <th>Number of Trees</th>
                                <td>
                                    <label for="constraintTreesLower">From:</label>
                                    <input id="constraintTreesLower" class="form-control chartControl" type="number" min="1" value="1" />
                                    <label for="constraintTreesUpper">To:</label>
                                    <input id="constraintTreesUpper" class="form-control chartControl" type="number" min="1" value="10" /><br />
                                    <input id="constraintTreesAny" type="checkbox" class="chartControl" checked> Any
                                </td>
                            </tr>
                            <tr>
                                <th>Treatments</th>
                                <td>
                                    <input id="constraintShowTreatments" type="checkbox" class="chartControl"> Overlay
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="col-sm-8">
        <!--Container for chart and axes titles-->
        <div id="chartContainerOnLoad" class="chartContainerOnLoad">
           <div id="chartContainer" class="whirly-loader">
                <div id="chartTitle" class="chartLabel text-center">
                    <h1></h1>
                </div>
                <div id="chart" class="ct-chart ct-minor-seventh"></div>
            </div>
        </div>
    </div>
</div>


@section scripts
{
    <script type="application/javascript">
        var recordsUrl = "@Url.Content("~/api/records/" + Model.RecordsUrlSuffix)";
        var pestsUrl = "@Url.Content("~/api/species")";
    </script>

    @Scripts.Render("~/bundles/chartist")
    @Scripts.Render("~/bundles/chartist-plugins")
    @Scripts.Render("~/bundles/typeahead")
    @Scripts.Render("~/bundles/bootstrap-tagsinput")
    @Scripts.Render("~/bundles/reporting")
}*@